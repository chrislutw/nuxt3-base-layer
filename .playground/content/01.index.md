---
title: 首頁
description: Nuxt 3 基礎模組
---

# 功能

給前端套用的基礎模組包含以下內容

- 元件:
- composables: `usePublicApi`, `useAuthApi`, `useThirdPartyPublicApi`, `usePageStyle`, `useLogger`, `useToastSSR`
- 模組: robots
- 插件: toast-ssr.client
- 頁面: /check, error

## 安裝

安裝套件為 devDependencies

```bash
pnpm install -D nuxt3-base-layer
```

並且加入到 `nuxt.config.ts` 的 `extends` 中

```ts [nuxt.config.ts]
defineNuxtConfig({
  extends: ['nuxt3-base-layer'],
})
```

## 本地端開發

因為這個專案是 private 的所以安裝套件時需要在使用者的目錄的 `.npmrc` 中加入以下設定

### 步驟1: 生成 Personal Access Token

1. 前往 GitHub 的 Personal Access Tokens 頁面。
2. 點擊「Generate new token」。
3. 輸入適當的描述，並選擇所需的權限範圍(需要： `repo`, `read:packages` )。
4. 點擊「Generate token」。

立即複製並保存您的新 token，因為之後將無法再次查看。

![權限](/images/role.png)

如果組織有設定sso還必須先驗證一次token才能使用，點 Configure SSO，再點 Auth 以便在組織內使用 Personal Access Token，每當你生成新的 token 或更新 token 時都需要執行這個步驟。

![組織 SSO 授權](/images/auth.png)

### 步驟2: 使用 Personal Access Token 登入

請在使用者目錄( `%USERPROFILE%` )中創建一個 `.npmrc` 檔案，並添加以下內容：

```bash [[user home]/.npmrc]
@old-ts-web:registry=https://npm.pkg.github.com
//npm.pkg.github.com/:_authToken=xxxxxx
```
並將 `xxxxxx` 替換為你的 GitHub 個人存取權杖 (personal access token)

第一行是限定 `@old-ts-web` 開頭的套件，指定 GitHub Packages 的 npm registry ，而不是公開的 npm registry 。

第二行是用於身份驗證的 token ，指定了在 GitHub Packages 的 npm registry ，才使用這個 token 。

二行的指令加起來的白話文就是，@old-ts-web 開頭的套件，使用 GitHub 的 npm registry ，而不是公開的 npm registry ，並且使用 token 方式做登入。

## 開發 nuxt3-base-layer

在根目錄 `app` 製作主要的功能，並在 `.playground` 目錄裡使用查看

首次 checkout 專案後需要先執行以下指令安裝依賴套件：

```bash
pnpm install
```

執行以下指令啟動開發伺服器 http://localhost:3000

```bash
pnpm dev
```

請在 `.playground/content` 目錄中編寫文件 docs

如果有更新文件內容，要執行以下動作來發佈新的文件網站

![更新文件網站](/images/update-docs-site.png)

## 發佈新的版本號

在工單分支 `wxxxx` 修改 `package.json` 的版本號，

```json [package.json]
{
  "version": "0.1.0"
}
```

合版回 `master` , 並切換到 `master` 分支然後執行以下指令：

```bash
pnpm publish
```

這會自動打包並發佈到 GitHub Packages 的 npm registry 。

然後在目前的 ``master`` 分支建立一個新的標籤 (tag) ，標籤名稱必須與 `package.json` 的版本號相同，例如 `v0.1.0` 。

```bash
git tag v0.1.0
git push origin v0.1.0
```

接著到 GitHub 網站上建立一個新的發佈 (release) ，選擇剛剛建立的標籤名稱，並填寫發佈的內容，然後點擊「Publish release」按鈕。

這樣就完成了發佈新的版本號的流程。
